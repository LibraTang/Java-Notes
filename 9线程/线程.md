# 线程

## 基本概念

* 线程是一个程序内部的顺序控制流
* 线程（动态）和进程（静态）的区别
  * 每个进程都有独立的代码和数据空间（进程上下文），进程间的切换会有较大的开销
  * 线程可以看成是轻量级的进程，同一类线程共享代码和数据空间，每个线程有独立的运行栈和程序计数器，线程切换的开销小
  * 多进程：在操作系统中能同时运行多个任务（程序）
  * 多线程：在同一应用程序中有多个顺序流同时执行
* Java的线程是通过`java.lang.Thread`类来实现的
* VM启动时会有一个自主方法(`public static void main() {}`)所定义的线程（主线程）
* 可以通过创建`Thread`的实例来创建新的线程
* 每个线程都是通过某个特定`Thread`对象所对应方法`run()`来完成其操作的，方法`run()`称为线程体
* 通过调用`Thread`类的`start()`方法来启动一个线程

```java
public class TestThread1 {
	public static void main(String args[]) {
		Runner1 r = new Runner1();
		Thread t = new Thread(r);
		t.start();
		
		for(int i=0; i<100; i++) {
			System.out.println("Main Thread:------" + i);
		}
	}
}

class Runner1 implements Runnable {
	public void run() {
		for(int i=0; i<100; i++) {	
			System.out.println("Runner1 :" + i);
		}
	}
}
```

## 线程的创建和启动

* 可以有两种方式创建新的线程

  * 第一种

    * 定义线程类实现Runnable接口
    * `Thread myThread = new Thread(target) //target为Runnable接口类型`
    * Runnable中只有一个方法：`public void run()`用以定义线程运行体
    * 使用Runnable接口的类的run方法定义中可以使用Thread的静态方法`public static Thread currentThread()`获取当前线程的引用

  * 第二种

    * 可以定义一个Thread的子类并重写其run方法：

    ```java
    class MyThread extends Thread {
        public void run() {...}
    }
    ```

    * 然后生成该类的对象`MyThread myThread = new  MyThread(...)